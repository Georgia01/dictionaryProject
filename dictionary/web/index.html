<!DOCTYPE html>
<html>
    <head>
        <title>First page</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="styles/secondTheme.css">
        <link rel="stylesheet" href="assets/font-awesome-4.7.0/css/font-awesome.min.css">
    </head>
    <body>
        <!--<img id="rotatedBox" src="greenRectangle.png"/>-->
        
        <article id="topBanner">
            <h1 id="h1">Programming Dictionary</h1>
            <form id="searchBox" onsubmit="myFunc()">
                <input id="searchInput" placeholder="Search here" type="text" maxlength="30" autocomplete="off" />
                <i class="fa fa-search fa-lg"></i>
            </form>
        </article>
        <main id="mainBody">
            <p><span id="name"></span><span id="type"></span></p>
            <article id="tabs">
                <section class="tab">
                    <input type="radio" id="tab1" name="tabgroup" checked>
                    <label for="tab1">Definition</label>
                    <div class="content" id="definition"></div>
                </section>

                <section class="tab">
                    <input type="radio" id="tab2" name="tabgroup">
                    <label for="tab2">Examples</label>
                    <div class="content" id="example"></div>
                </section>

                <section class="tab">
                    <input type="radio" id="tab3" name="tabgroup">
                    <label for="tab3">Origin</label>
                    <div class="content" id="origin"><div id="map"></div></div>
                </section>
            </article>
            <article id="rightPanel">
                <h2>Word of the day</h2>
                <section>
                    <p>word:  description + examples</p>
                </section>
            </article>
        </main>
        <footer>
        </footer>  
      
        <script src="json/descriptions.js"></script>
        <script>
           function myFunc(){
               
            let searchInput = document.getElementById("searchInput").value;
            console.log(`searchInput: ${searchInput}`);
            
            if (searchInput) {
                expandMain();
            }
            
            let obj = JSON.parse(jsonString);
            let index = obj.findIndex(function(item, i){
                return item.name === searchInput
            });

            let nameSection = document.getElementById("name");
            let nameData = `${obj[index].name}`;
            nameSection.innerHTML = nameData.charAt(0).toUpperCase() + nameData.slice(1); 
            
            let typeSection = document.getElementById("type");
            let typeData = "(" + `${obj[index].type}` + ")";
            typeSection.innerHTML = typeData; 
            
            let defintionDataSection = document.getElementById("definition");
            let definitionData = `${obj[index].description}`;
            defintionDataSection.innerHTML = definitionData; 
            
            let exampleDataSection = document.getElementById("example");
            let exampleData = `${obj[index].example}`;
            exampleDataSection.innerHTML = exampleData; 
            
//            let originDataSection = document.getElementById("origin");
//            originDataSection.innerHTML = originData; 
            
            addMap();
            event.preventDefault();
           }
        </script>
        
        <script>
            function expandMain(){
                 
                if (typeof window.innerWidth != 'undefined') {
                    viewportwidth = window.innerWidth;
                }
                
                if (viewportwidth >= 500) {
                    document.getElementById("topBanner").style.animation =  "movingHeader 2s 1 forwards";
                    document.getElementById("mainBody").style.animation =  "movingBody 2s 1 forwards";
                }
                else {
                    document.body.style.marginTop = "0px";
                    document.getElementById("h1").style.paddingTop = "0px";
                }
                document.getElementById("mainBody").style.display = "block";
                event.preventDefault();
            }
            
        </script>
        <script>
            function addMap(){
                 var googleMapApi = document.createElement("script");
                googleMapApi.setAttribute("async", "");
                googleMapApi.setAttribute("defer", "");
                googleMapApi.setAttribute("src", "https://maps.googleapis.com/maps/api/js?key=AIzaSyAXlGIU84NMenpp9ni_L4kMo9HOq7uHMgo&callback=initMap");
                document.body.appendChild(googleMapApi);
            }
            
        </script>
        <script>
            
            function initMap() {
                let searchInput = document.getElementById("searchInput").value;
                let obj = JSON.parse(jsonString);
                let index = obj.findIndex(function(item, i){
                    return item.name === searchInput
                });
                let originLatData = `${obj[index].originLat}`;
                let originLongData = `${obj[index].originLong}`;
            
                var location = {lat: parseInt(originLatData, 10), lng: parseInt(originLongData, 10)};
                var map = new google.maps.Map(document.getElementById('map'), {
                    center: location, zoom: 4});
                var marker = new google.maps.Marker({
                    position: location, map: map});
            }
        </script>

    </body>
</html>
